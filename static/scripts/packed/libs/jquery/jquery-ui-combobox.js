(function(a){a.widget("ui.combobox",{_create:function(){var c,g=this,b=this.element.hide(),f=b.children(":selected"),h=f.val()?f.text():"",i=this.wrapper=a("<span>").addClass("ui-combobox").insertAfter(b);function e(j){var l=a(j).val(),m=new RegExp("^"+a.ui.autocomplete.escapeRegex(l)+"$","i"),k=false;b.children("option").each(function(){if(a(this).text().match(m)){this.selected=k=true;return false}});if(!k){a(j).val("").attr("title",l+" didn't match any item").tooltip("open");b.val("");setTimeout(function(){c.tooltip("close").attr("title","")},2500);c.data("autocomplete").term="";return false}}var d=(this.options.size?this.options.size:20);c=a("<input>").appendTo(i).val(h).click(function(){this.select()}).attr("title","").attr("size",d).addClass("ui-state-default ui-combobox-input").autocomplete({appendTo:this.options.appendTo,delay:0,minLength:0,source:function(k,j){var l=new RegExp(a.ui.autocomplete.escapeRegex(k.term),"i");j(b.children("option").map(function(){var m=a(this).text();if(this.value&&(!k.term||l.test(m))){return{label:m.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(k.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:m,option:this}}}))},select:function(j,k){k.item.option.selected=true;g._trigger("selected",j,{item:k.item.option})},change:function(j,k){if(!k.item){return e(this)}}}).addClass("ui-widget ui-widget-content ui-corner-left");c.data("autocomplete")._renderItem=function(j,k){return a("<li>").data("item.autocomplete",k).append("<a>"+k.label+"</a>").appendTo(j)};a("<a>").attr("tabIndex",-1).attr("title","Show All Items").tooltip().appendTo(i).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-combobox-toggle").click(function(){if(c.autocomplete("widget").is(":visible")){c.autocomplete("close");e(c);return}a(this).blur();c.autocomplete("search","");c.focus()});c.tooltip({position:{of:this.button},tooltipClass:"ui-state-highlight"})},destroy:function(){this.wrapper.remove();this.element.show();a.Widget.prototype.destroy.call(this)}})})(jQuery);